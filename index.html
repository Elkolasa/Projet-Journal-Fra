<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projet Journal Français</title>
<link rel="icon" type="image/jpg" href="Images/Logo.jpg">
    
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: sans-serif;
    background-color: #f2f2f2;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
}

.book-container {
    width: 80vw;
    max-width: 600px;
    aspect-ratio: 210 / 297;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}

.page {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;

    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    /* PLUS D'ANIMATION : position instantanée */
    transform: translateX(100%);
    /* transition supprimée pour éviter tout bug */
}

.page.active {
    transform: translateX(0);
}

/* classes de position (utiles si on veut les garder) */
.page.left { transform: translateX(-100%); }
.page.right { transform: translateX(100%); }
</style>
</head>
<body>

<div class="book-container">
    <div class="page" style="background-image: url('Images/page1.png');"></div>
    <div class="page" style="background-image: url('Images/page2.png');"></div>
    <div class="page" style="background-image: url('Images/page3.png');"></div>
    <div class="page" style="background-image: url('Images/page4.png');"></div>
    <div class="page" style="background-image: url('Images/page5.png');"></div>
    <div class="page" style="background-image: url('Images/page6.png');"></div>
    <div class="page" style="background-image: url('Images/page7.png');"></div>
    <div class="page" style="background-image: url('Images/page8.png');"></div>
</div>

<script>
const pages = Array.from(document.querySelectorAll(".page"));
let current = 0;

// Initialisation : positionne toutes les pages (sans animation)
function updatePages() {
    pages.forEach((p, i) => {
        if (i === current) {
            p.style.transform = "translateX(0)";
            p.classList.add("active");
            p.classList.remove("left", "right");
        } else if (i < current) {
            p.style.transform = "translateX(-100%)";
            p.classList.add("left");
            p.classList.remove("active", "right");
        } else {
            p.style.transform = "translateX(100%)";
            p.classList.add("right");
            p.classList.remove("active", "left");
        }
    });
}

// change de page sans animation (instantané)
function showPage(target) {
    if (target === current || target < 0 || target >= pages.length) return;
    current = target;
    updatePages();
}

// initial placement
updatePages();

// PC scroll (molette) — petit verrou pour éviter sauts multiples
let lock = false;
window.addEventListener("wheel", e => {
    if (lock) return;
    lock = true;

    if (e.deltaY > 0 && current < pages.length - 1) showPage(current + 1);
    else if (e.deltaY < 0 && current > 0) showPage(current - 1);

    // délai court pour réactiver (pas d'animation donc on peut remettre court)
    setTimeout(() => lock = false, 200);
});

// Flèches clavier
window.addEventListener("keydown", e => {
    if (e.key === "ArrowRight" && current < pages.length - 1) showPage(current + 1);
    if (e.key === "ArrowLeft" && current > 0) showPage(current - 1);
});

// MOBILE – SWIPE GAUCHE / DROITE
let startX = 0;
let startY = 0;
let isTouching = false;

window.addEventListener("touchstart", e => {
    if (!e.touches || e.touches.length === 0) return;
    isTouching = true;
    startX = e.touches[0].clientX;
    startY = e.touches[0].clientY;
});

window.addEventListener("touchmove", e => {
    // Empêche le scroll vertical si on balaye horizontalement sur le conteneur
    // Mais on ne bloque pas systématiquement pour conserver comportement natif
    // (facultatif, laissé simple pour compatibilité)
}, { passive: true });

window.addEventListener("touchend", e => {
    if (!isTouching) return;
    isTouching = false;
    const endX = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientX : startX;
    const endY = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientY : startY;
    const diffX = endX - startX;
    const diffY = endY - startY;

    // Ignorer gestes verticaux dominants
    if (Math.abs(diffX) < 40 || Math.abs(diffX) < Math.abs(diffY)) return;

    if (diffX < 0 && current < pages.length - 1) {
        // swipe gauche -> page suivante
        showPage(current + 1);
    } else if (diffX > 0 && current > 0) {
        // swipe droite -> page précédente
        showPage(current - 1);
    }
});
</script>

</body>
</html>



